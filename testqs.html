<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test qs function</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

    <h1>Test qs function</h1>

    <p>test with a url like this:  <br/> http://127.0.0.1:5500/test.html<b style="color:red;">?x=true&env=sandbox&publickey=this%20is%20public%20key&updatetoken=this%20is%20updatetoken</b></p>

    <p></p><span id="env">?</span></p>
    <p></p><span id="publickey">?</span></p>
    <p></p><span id="updatetoken">?</span></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script>
        (function ($) {

            var env = qs('env');     
            $('#env').text(env);
            
            var publickey = qs('publickey');     
            $('#publickey').text(publickey);
            
            var updatetoken = qs('updatetoken');     
            $('#updatetoken').text(updatetoken);

        })(jQuery);

        function qs(key) {
            key = key.replace(/[*+?^$.\[\]{}()|\\\/]/g, "\\$&"); // escape RegEx meta chars
            var match = location.search.match(new RegExp("[?&]" + key + "=([^&]+)(&|$)"));
            return match && decodeURIComponent(match[1].replace(/\+/g, " "));
        }

    </script>
</body>

</html>